/*! Sidr - v1.0.0 - 2013-02-20
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
(function(e){var t=!1,n=!1,r={isUrl:function(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)?!0:!1},loadContent:function(e,t){e.html(t)},addPrefix:function(e){var t=e.attr("id"),n=e.attr("class");typeof t=="string"&&""!==t&&e.attr("id",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),typeof n=="string"&&""!==n&&"sidr-inner"!==n&&e.attr("class",n.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),e.removeAttr("style")}},i={open:function(r,s){typeof r=="function"?(s=r,r="sidr"):r||(r="sidr");var o=e("#"+r),u=e("body"),a=e("html"),f=o.outerWidth(!0),l=o.data("speed"),c=o.data("side"),h,p,d;if(o.is(":visible")||t)return;if(n!==!1){i.close(n,function(){i.open(r)});return}t=!0,c==="left"?(h={left:f+"px"},p={left:"0px"}):(h={right:f+"px"},p={right:"0px"}),d=a.scrollTop(),a.css("overflow-x","hidden").scrollTop(d),u.css({width:u.width(),position:"absolute"}),u.animate(h,l),o.css("display","block").animate(p,l,function(){t=!1,n=r,typeof s=="function"&&s(r)})},close:function(r,i){typeof r=="function"?(i=r,r="sidr"):r||(r="sidr");var s=e("#"+r),o=e("body"),u=e("html"),a=s.outerWidth(!0),f=s.data("speed"),l=s.data("side"),c,h,p;if(!s.is(":visible")||t)return;t=!0,l==="left"?(c={left:0},h={left:"-"+a+"px"}):(c={right:0},h={right:"-"+a+"px"}),p=u.scrollTop(),u.removeAttr("style").scrollTop(p),o.animate(c,f),s.animate(h,f,function(){s.removeAttr("style"),o.removeAttr("style"),e("html").removeAttr("style"),t=!1,n=!1,typeof i=="function"&&i(r)})},toogle:function(t,n){typeof t=="function"?(n=t,t="sidr"):t||(t="sidr");var r=e("#"+t);r.is(":visible")?i.close(t,n):i.open(t,n)}};e.sidr=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="function"||typeof t=="string"||!t)return i.toogle.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.sidr")},e.fn.sidr=function(t){var n=e.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0},t),s=n.name,o=e("#"+s);o.length===0&&(o=e("<div />").attr("id",s).appendTo(e("body"))),o.addClass("sidr").addClass(n.side).data({speed:n.speed,side:n.side});if(typeof n.source=="function"){var u=n.source(s);r.loadContent(o,u)}else if(typeof n.source=="string"&&r.isUrl(n.source))e.get(n.source,function(e){r.loadContent(o,e)});else if(typeof n.source=="string"){var a="",f=n.source.split(",");e.each(f,function(t,n){a+='<div class="sidr-inner">'+e(n).html()+"</div>"});if(n.renaming){var l=e("<div />").html(a);l.find("*").each(function(t,n){var i=e(n);r.addPrefix(i)}),a=l.html()}r.loadContent(o,a)}else n.source!==null&&e.error("Invalid Sidr Source");return this.each(function(){var t=e(this),n=t.data("sidr");n||(t.data("sidr",s),t.click(function(e){e.preventDefault(),i.toogle(s)}))})}})(jQuery);